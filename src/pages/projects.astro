---
import { getCollection } from "astro:content";
import ProjectSection from "src/components/Projects/ProjectSection.astro";
import { ProjectStatus } from "src/content/config";
import Base from "src/layouts/Base.layout.astro";
import { fisherYatesShuffle } from '../helpers/fisher-yates';



let projects = await getCollection<"projects">("projects");
projects = fisherYatesShuffle(projects)
projects = projects.sort((a, b) => (a.data.featured ? 1 : 0));




const progressProjects = projects.filter(
  (v) => v.data.progress === ProjectStatus.OnProgress
);
const doneProjects = projects.filter(
  (v) => v.data.progress === ProjectStatus.Done
);
const pausProjects = projects.filter(
  (v) => v.data.progress === ProjectStatus.Paus
);


---

<Base>
  <Fragment slot="body">
    <div class="grid md:grid-cols-3 gap-10">
      <ProjectSection name="Pågående" projects={progressProjects} />
      <ProjectSection name="Klar" projects={doneProjects} />
      <ProjectSection name="Paus" projects={pausProjects} />
    </div>
  </Fragment>
</Base>
